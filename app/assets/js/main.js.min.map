{"version":3,"sources":["main.js","modal.js","youtube-iframe.js"],"names":["ua","navigator","userAgent","clickEvent","match","paddingOffset","concat","window","innerWidth","document","body","offsetWidth","buttonOpenModal","querySelectorAll","modalContent","contentHTML","Modal","constructor","wrapper","querySelector","modal","this","open","createElement","content","closeButton","classList","add","insertBefore","appendChild","innerHTML","style","overflow","paddingRight","close","remove","addEventListener","e","target","addingContent","btn","i","length","dataset","windowid","buttonid","UrlExists","url","http","XMLHttpRequest","send","status","generateURL","id","createIframe","iframe","setAttribute","allow","setupVideo","video","vID","posterSrc","postersrc","posterCheck","postercheck","linkContent","link","replace","button","preventDefault","contains","removeAttribute","findVideo","videos","forEach"],"mappings":"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","file":"main.js","sourcesContent":["//= include modal.js\n//= include youtube-iframe.js\nwindow.addEventListener('load', () => {});\n","const ua = navigator.userAgent;\nconst clickEvent =\n  ua.match(/iPad/i) || ua.match(/iPhone/) ? 'touchstart' : 'click';\nconst paddingOffset = `${window.innerWidth - document.body.offsetWidth}px`;\n\nconst buttonOpenModal = document.querySelectorAll('.modal__open');\nconst modalContent = document.querySelectorAll('[data-windowid]');\nlet contentHTML = '';\n\nclass Modal {\n  constructor() {\n    const wrapper = document.querySelector('.wrapper');\n    const modal = this;\n\n    modal.open = function () {\n      modal.wrapper = document.createElement('div');\n      modal.window = document.createElement('div');\n      modal.content = document.createElement('div');\n      modal.closeButton = document.createElement('div');\n\n      modal.wrapper.classList.add('modal__wrapper');\n      modal.window.classList.add('modal');\n      modal.content.classList.add('modal__content');\n      modal.closeButton.classList.add('modal__close');\n\n      document.body.insertBefore(modal.wrapper, wrapper);\n      modal.wrapper.appendChild(modal.window);\n      modal.window.appendChild(modal.closeButton);\n      modal.window.appendChild(modal.content);\n\n      modal.wrapper.classList.add('modal__wrapper-active');\n      modal.window.classList.add('modal-fade-in');\n      modal.closeButton.classList.add('modal__close-active');\n\n      modal.content.innerHTML = contentHTML;\n\n      document.body.style.overflow = 'hidden';\n      document.body.style.paddingRight = paddingOffset;\n      document.querySelector('.header').style.paddingRight = paddingOffset;\n\n      return modal;\n    };\n\n    modal.close = function () {\n      modal.wrapper.classList.remove('modal__wrapper-active');\n      modal.closeButton.classList.remove('modal__close-active');\n      modal.wrapper.remove();\n\n      document.body.style.overflow = 'unset';\n      document.body.style.paddingRight = '0';\n      document.querySelector('.header').style.paddingRight = '0';\n\n      return modal;\n    };\n\n    document.addEventListener(clickEvent, (e) => {\n      if (e.target === modal.wrapper || e.target === modal.closeButton) {\n        modal.close();\n      }\n    });\n  }\n}\n\nconst modal = new Modal();\n\nfunction addingContent(btn) {\n  for (let i = 0; i < modalContent.length; i += 1) {\n    if (modalContent[i].dataset.windowid === btn.dataset.buttonid) {\n      contentHTML = modalContent[i].innerHTML;\n    }\n  }\n}\n\nbuttonOpenModal.forEach((button) => {\n  button.addEventListener(clickEvent, (e) => {\n    e.preventDefault();\n\n    addingContent(button);\n    modal.open();\n  });\n});\n","function UrlExists(url) {\r\n  const http = new XMLHttpRequest();\r\n  http.open('HEAD', url, false);\r\n  http.send();\r\n  return http.status !== 404;\r\n}\r\n\r\nfunction generateURL(id) {\r\n  const query =\r\n    '?rel=0&showinfo=0&autoplay=1&modestbranding=1&iv_load_policy=3';\r\n  return `https://www.youtube.com/embed/${id}${query}`;\r\n}\r\n\r\nfunction createIframe(id) {\r\n  const iframe = document.createElement('iframe');\r\n\r\n  iframe.setAttribute('allowfullscreen', '');\r\n  iframe.setAttribute('frameborder', '0');\r\n  iframe.allow =\r\n    'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';\r\n  iframe.setAttribute('src', generateURL(id));\r\n  iframe.classList.add('video__media');\r\n\r\n  return iframe;\r\n}\r\n\r\nfunction setupVideo(video) {\r\n  const vID = video.dataset.id;\r\n  const posterSrc = video.dataset.postersrc;\r\n  const posterCheck = +video.dataset.postercheck;\r\n  const linkContent = `\r\n    <picture>\r\n      <source srcset=\"https://i.ytimg.com/vi_webp/${vID}/maxresdefault.webp\" type=\"image/webp\">\r\n      <img class=\"video__media\" src=\"https://i.ytimg.com/vi/${vID}/maxresdefault.jpg\" alt=\"poster\">\r\n    </picture>\r\n  `;\r\n  const buttonContent = `\r\n    <svg class=\"play\" width=\"100\" height=\"100\" viewbox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path class=\"play__circle\" d=\"M50 100c27.614 0 50-22.386 50-50S77.614 0 50 0 0 22.386 0 50s22.386 50 50 50z\" />\r\n      <path class=\"play__triangle\" d=\"M69.166 48.463c.255.163.466.39.612.658a1.843 1.843 0 010 1.757 1.802 1.802 0 01-.612.659L40.726 69.72c-1.185.758-2.726-.11-2.726-1.538V31.818c0-1.427 1.54-2.296 2.727-1.537l28.439 18.182z\" />\r\n    </svg>\r\n  `;\r\n\r\n  const link = document.createElement('a');\r\n  link.classList.add('video__link');\r\n  link.setAttribute('href', 'https://youtu.be/ID'.replace('ID', vID));\r\n\r\n  if (posterCheck === 1) {\r\n    if (posterSrc && UrlExists(posterSrc)) {\r\n      link.innerHTML = `<img class=\"video__media\" src=\"${posterSrc}\" alt=\"poster\">`;\r\n    } else {\r\n      link.innerHTML = linkContent;\r\n    }\r\n  } else {\r\n    link.innerHTML = linkContent;\r\n  }\r\n\r\n  video.appendChild(link);\r\n\r\n  const button = document.createElement('button');\r\n  button.classList.add('video__button');\r\n  button.setAttribute('type', 'button');\r\n  button.setAttribute('aria-label', 'play');\r\n  button.innerHTML = buttonContent;\r\n  video.appendChild(button);\r\n\r\n  video.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!video.classList.contains('bonus__video')) {\r\n      const iframe = createIframe(vID);\r\n      link.remove();\r\n      button.remove();\r\n      video.appendChild(iframe);\r\n    }\r\n  });\r\n\r\n  link.removeAttribute('href');\r\n  video.classList.add('video--enabled');\r\n}\r\n\r\nfunction findVideo() {\r\n  const videos = document.querySelectorAll('.video');\r\n  for (let i = 0; i < videos.length; i += 1) {\r\n    setupVideo(videos[i]);\r\n  }\r\n}\r\n\r\nfindVideo();\r\n"]}