{"version":3,"sources":["youtube-iframe.js"],"names":["UrlExists","url","http","XMLHttpRequest","open","send","status","generateURL","id","createIframe","iframe","document","createElement","setAttribute","allow","classList","add","setupVideo","video","vID","dataset","posterSrc","postersrc","posterCheck","postercheck","linkContent","link","replace","innerHTML","appendChild","button","addEventListener","e","preventDefault","contains","remove","removeAttribute","findVideo","videos","querySelectorAll","i","length"],"mappings":"AAAA,aAAA,SAASA,UAAUC,GACjB,MAAMC,EAAO,IAAIC,eAGjB,OAFAD,EAAKE,KAAK,OAAQH,GAAK,GACvBC,EAAKG,OACkB,MAAhBH,EAAKI,OAGd,SAASC,YAAYC,GAGnB,MAAQ,iCAAgCA,kEAG1C,SAASC,aAAaD,GACpB,MAAME,EAASC,SAASC,cAAc,UAStC,OAPAF,EAAOG,aAAa,kBAAmB,IACvCH,EAAOG,aAAa,cAAe,KACnCH,EAAOI,MACL,0EACFJ,EAAOG,aAAa,MAAON,YAAYC,IACvCE,EAAOK,UAAUC,IAAI,gBAEdN,EAGT,SAASO,WAAWC,GAClB,MAAMC,EAAMD,EAAME,QAAQZ,GACpBa,EAAYH,EAAME,QAAQE,UAC1BC,GAAeL,EAAME,QAAQI,YAC7BC,EAAe,sEAE6BN,yGACUA,yDAUtDO,EAAOf,SAASC,cAAc,KACpCc,EAAKX,UAAUC,IAAI,eACnBU,EAAKb,aAAa,OAAQ,sBAAsBc,QAAQ,KAAMR,IAE1C,IAAhBI,GACEF,GAAarB,UAAUqB,GACzBK,EAAKE,UAAa,kCAAiCP,mBAKrDK,EAAKE,UAAYH,EAGnBP,EAAMW,YAAYH,GAElB,MAAMI,EAASnB,SAASC,cAAc,UACtCkB,EAAOf,UAAUC,IAAI,iBACrBc,EAAOjB,aAAa,OAAQ,UAC5BiB,EAAOjB,aAAa,aAAc,QAClCiB,EAAOF,UA3BgB,ueA4BvBV,EAAMW,YAAYC,GAElBZ,EAAMa,iBAAiB,SAAUC,IAG/B,GAFAA,EAAEC,kBAEGf,EAAMH,UAAUmB,SAAS,gBAAiB,CAC7C,MAAMxB,EAASD,aAAaU,GAC5BO,EAAKS,SACLL,EAAOK,SACPjB,EAAMW,YAAYnB,OAItBgB,EAAKU,gBAAgB,QACrBlB,EAAMH,UAAUC,IAAI,kBAGtB,SAASqB,YACP,MAAMC,EAAS3B,SAAS4B,iBAAiB,UACzC,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAOG,OAAQD,GAAK,EACtCvB,WAAWqB,EAAOE,IAItBH","file":"youtube-iframe.js","sourcesContent":["function UrlExists(url) {\n  const http = new XMLHttpRequest();\n  http.open('HEAD', url, false);\n  http.send();\n  return http.status !== 404;\n}\n\nfunction generateURL(id) {\n  const query =\n    '?rel=0&showinfo=0&autoplay=1&modestbranding=1&iv_load_policy=3';\n  return `https://www.youtube.com/embed/${id}${query}`;\n}\n\nfunction createIframe(id) {\n  const iframe = document.createElement('iframe');\n\n  iframe.setAttribute('allowfullscreen', '');\n  iframe.setAttribute('frameborder', '0');\n  iframe.allow =\n    'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';\n  iframe.setAttribute('src', generateURL(id));\n  iframe.classList.add('video__media');\n\n  return iframe;\n}\n\nfunction setupVideo(video) {\n  const vID = video.dataset.id;\n  const posterSrc = video.dataset.postersrc;\n  const posterCheck = +video.dataset.postercheck;\n  const linkContent = `\n    <picture>\n      <source srcset=\"https://i.ytimg.com/vi_webp/${vID}/maxresdefault.webp\" type=\"image/webp\">\n      <img class=\"video__media\" src=\"https://i.ytimg.com/vi/${vID}/maxresdefault.jpg\" alt=\"poster\">\n    </picture>\n  `;\n  const buttonContent = `\n    <svg class=\"play\" width=\"100\" height=\"100\" viewbox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path class=\"play__circle\" d=\"M50 100c27.614 0 50-22.386 50-50S77.614 0 50 0 0 22.386 0 50s22.386 50 50 50z\" />\n      <path class=\"play__triangle\" d=\"M69.166 48.463c.255.163.466.39.612.658a1.843 1.843 0 010 1.757 1.802 1.802 0 01-.612.659L40.726 69.72c-1.185.758-2.726-.11-2.726-1.538V31.818c0-1.427 1.54-2.296 2.727-1.537l28.439 18.182z\" />\n    </svg>\n  `;\n\n  const link = document.createElement('a');\n  link.classList.add('video__link');\n  link.setAttribute('href', 'https://youtu.be/ID'.replace('ID', vID));\n\n  if (posterCheck === 1) {\n    if (posterSrc && UrlExists(posterSrc)) {\n      link.innerHTML = `<img class=\"video__media\" src=\"${posterSrc}\" alt=\"poster\">`;\n    } else {\n      link.innerHTML = linkContent;\n    }\n  } else {\n    link.innerHTML = linkContent;\n  }\n\n  video.appendChild(link);\n\n  const button = document.createElement('button');\n  button.classList.add('video__button');\n  button.setAttribute('type', 'button');\n  button.setAttribute('aria-label', 'play');\n  button.innerHTML = buttonContent;\n  video.appendChild(button);\n\n  video.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    if (!video.classList.contains('bonus__video')) {\n      const iframe = createIframe(vID);\n      link.remove();\n      button.remove();\n      video.appendChild(iframe);\n    }\n  });\n\n  link.removeAttribute('href');\n  video.classList.add('video--enabled');\n}\n\nfunction findVideo() {\n  const videos = document.querySelectorAll('.video');\n  for (let i = 0; i < videos.length; i += 1) {\n    setupVideo(videos[i]);\n  }\n}\n\nfindVideo();\n"]}