{"version":3,"sources":["youtube-iframe.js"],"names":["UrlExists","url","http","XMLHttpRequest","open","send","status","generateURL","id","concat","createIframe","iframe","document","createElement","setAttribute","allow","classList","add","setupVideo","video","vID","dataset","posterSrc","postersrc","posterCheck","postercheck","linkContent","link","replace","innerHTML","appendChild","button","addEventListener","e","preventDefault","contains","remove","removeAttribute","findVideo","videos","querySelectorAll","i","length"],"mappings":"AAAA,aAAA,SAASA,UAAUC,GACjB,MAAMC,EAAO,IAAIC,eAGjB,OAFAD,EAAKE,KAAK,OAAQH,GAAK,GACvBC,EAAKG,OACkB,MAAhBH,EAAKI,OAGd,SAASC,YAAYC,GAGnB,MAAA,iCAAAC,OAAwCD,GAAxCC,OADE,kEAIJ,SAASC,aAAaF,GACpB,MAAMG,EAASC,SAASC,cAAc,UAStC,OAPAF,EAAOG,aAAa,kBAAmB,IACvCH,EAAOG,aAAa,cAAe,KACnCH,EAAOI,MACL,0EACFJ,EAAOG,aAAa,MAAOP,YAAYC,IACvCG,EAAOK,UAAUC,IAAI,gBAEdN,EAGT,SAASO,WAAWC,GAClB,MAAMC,EAAMD,EAAME,QAAQb,GACpBc,EAAYH,EAAME,QAAQE,UAC1BC,GAAeL,EAAME,QAAQI,YAC7BC,EAAW,sEAAAjB,OAEiCW,EAFjC,yGAAAX,OAG2CW,EAH3C,yDAaXO,EAAOf,SAASC,cAAc,KACpCc,EAAKX,UAAUC,IAAI,eACnBU,EAAKb,aAAa,OAAQ,sBAAsBc,QAAQ,KAAMR,IAE1C,IAAhBI,GACEF,GAAatB,UAAUsB,GACzBK,EAAKE,UAAL,kCAAApB,OAAmDa,EAAnD,mBAKFK,EAAKE,UAAYH,EAGnBP,EAAMW,YAAYH,GAElB,MAAMI,EAASnB,SAASC,cAAc,UACtCkB,EAAOf,UAAUC,IAAI,iBACrBc,EAAOjB,aAAa,OAAQ,UAC5BiB,EAAOjB,aAAa,aAAc,QAClCiB,EAAOF,UA3BY,ueA4BnBV,EAAMW,YAAYC,GAElBZ,EAAMa,iBAAiB,SAAUC,IAG/B,GAFAA,EAAEC,kBAEGf,EAAMH,UAAUmB,SAAS,gBAAiB,CAC7C,MAAMxB,EAASD,aAAaU,GAC5BO,EAAKS,SACLL,EAAOK,SACPjB,EAAMW,YAAYnB,OAItBgB,EAAKU,gBAAgB,QACrBlB,EAAMH,UAAUC,IAAI,kBAGtB,SAASqB,YACP,MAAMC,EAAS3B,SAAS4B,iBAAiB,UACzC,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAOG,OAAQD,GAAK,EACtCvB,WAAWqB,EAAOE,IAItBH","file":"youtube-iframe.js","sourcesContent":["function UrlExists(url) {\r\n  const http = new XMLHttpRequest();\r\n  http.open('HEAD', url, false);\r\n  http.send();\r\n  return http.status !== 404;\r\n}\r\n\r\nfunction generateURL(id) {\r\n  const query =\r\n    '?rel=0&showinfo=0&autoplay=1&modestbranding=1&iv_load_policy=3';\r\n  return `https://www.youtube.com/embed/${id}${query}`;\r\n}\r\n\r\nfunction createIframe(id) {\r\n  const iframe = document.createElement('iframe');\r\n\r\n  iframe.setAttribute('allowfullscreen', '');\r\n  iframe.setAttribute('frameborder', '0');\r\n  iframe.allow =\r\n    'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';\r\n  iframe.setAttribute('src', generateURL(id));\r\n  iframe.classList.add('video__media');\r\n\r\n  return iframe;\r\n}\r\n\r\nfunction setupVideo(video) {\r\n  const vID = video.dataset.id;\r\n  const posterSrc = video.dataset.postersrc;\r\n  const posterCheck = +video.dataset.postercheck;\r\n  const linkContent = `\r\n    <picture>\r\n      <source srcset=\"https://i.ytimg.com/vi_webp/${vID}/maxresdefault.webp\" type=\"image/webp\">\r\n      <img class=\"video__media\" src=\"https://i.ytimg.com/vi/${vID}/maxresdefault.jpg\" alt=\"poster\">\r\n    </picture>\r\n  `;\r\n  const buttonContent = `\r\n    <svg class=\"play\" width=\"100\" height=\"100\" viewbox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path class=\"play__circle\" d=\"M50 100c27.614 0 50-22.386 50-50S77.614 0 50 0 0 22.386 0 50s22.386 50 50 50z\" />\r\n      <path class=\"play__triangle\" d=\"M69.166 48.463c.255.163.466.39.612.658a1.843 1.843 0 010 1.757 1.802 1.802 0 01-.612.659L40.726 69.72c-1.185.758-2.726-.11-2.726-1.538V31.818c0-1.427 1.54-2.296 2.727-1.537l28.439 18.182z\" />\r\n    </svg>\r\n  `;\r\n\r\n  const link = document.createElement('a');\r\n  link.classList.add('video__link');\r\n  link.setAttribute('href', 'https://youtu.be/ID'.replace('ID', vID));\r\n\r\n  if (posterCheck === 1) {\r\n    if (posterSrc && UrlExists(posterSrc)) {\r\n      link.innerHTML = `<img class=\"video__media\" src=\"${posterSrc}\" alt=\"poster\">`;\r\n    } else {\r\n      link.innerHTML = linkContent;\r\n    }\r\n  } else {\r\n    link.innerHTML = linkContent;\r\n  }\r\n\r\n  video.appendChild(link);\r\n\r\n  const button = document.createElement('button');\r\n  button.classList.add('video__button');\r\n  button.setAttribute('type', 'button');\r\n  button.setAttribute('aria-label', 'play');\r\n  button.innerHTML = buttonContent;\r\n  video.appendChild(button);\r\n\r\n  video.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!video.classList.contains('bonus__video')) {\r\n      const iframe = createIframe(vID);\r\n      link.remove();\r\n      button.remove();\r\n      video.appendChild(iframe);\r\n    }\r\n  });\r\n\r\n  link.removeAttribute('href');\r\n  video.classList.add('video--enabled');\r\n}\r\n\r\nfunction findVideo() {\r\n  const videos = document.querySelectorAll('.video');\r\n  for (let i = 0; i < videos.length; i += 1) {\r\n    setupVideo(videos[i]);\r\n  }\r\n}\r\n\r\nfindVideo();\r\n"]}