"use strict";const ua=navigator.userAgent,clickEvent=ua.match(/iPad/i)||ua.match(/iPhone/)?"touchstart":"click",paddingOffset="".concat(window.innerWidth-document.body.offsetWidth,"px"),buttonOpenModal=document.querySelectorAll(".modal__open"),modalContent=document.querySelectorAll("[data-windowid]");let modalContentHTML="";class Modal{constructor(){const e=document.querySelector(".wrapper"),t=this;t.create=function(n){t.wrapper=document.createElement("div"),t.window=document.createElement("div"),t.content=document.createElement("div"),t.closeButton=document.createElement("div"),t.wrapper.classList.add("modal__wrapper"),t.window.classList.add("modal"),t.window.classList.add(n),t.content.classList.add("modal__content"),t.closeButton.classList.add("modal__close"),document.body.insertBefore(t.wrapper,e),t.wrapper.appendChild(t.window),t.window.appendChild(t.closeButton),t.window.appendChild(t.content)},t.open=function(){return t.wrapper.classList.add("modal__wrapper-active"),t.window.classList.add("modal-fade-in"),t.closeButton.classList.add("modal__close-active"),t.content.innerHTML=modalContentHTML,document.body.style.overflow="hidden",document.body.style.paddingRight=paddingOffset,document.querySelector(".header").style.paddingRight=paddingOffset,document.querySelector(".footer").style.paddingRight=-paddingOffset,t},t.close=function(){return t.wrapper.classList.remove("modal__wrapper-active"),t.closeButton.classList.remove("modal__close-active"),t.wrapper.remove(),document.body.style.overflow="unset",document.body.style.paddingRight="0",document.querySelector(".header").style.paddingRight="0",document.querySelector(".footer").style.paddingRight="0",t},document.addEventListener(clickEvent,(e=>{e.target!==t.wrapper&&e.target!==t.closeButton||t.close()}))}}const modal=new Modal;function addingContent(e){for(let t=0;t<modalContent.length;t+=1)modalContent[t].dataset.windowid===e.dataset.buttonid&&(modal.create(modalContent[t].dataset.type),modalContentHTML=modalContent[t].innerHTML)}function UrlExists(e){const t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),404!==t.status}function generateURL(e){return"https://www.youtube.com/embed/".concat(e).concat("?rel=0&showinfo=0&autoplay=1&modestbranding=1&iv_load_policy=3")}function createIframe(e){const t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("frameborder","0"),t.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",t.setAttribute("src",generateURL(e)),t.classList.add("video__media"),t}function setupVideo(e){const t=e.dataset.id,n=e.dataset.postersrc,a=+e.dataset.postercheck,o='\n    <picture>\n      <source srcset="https://i.ytimg.com/vi_webp/'.concat(t,'/maxresdefault.webp" type="image/webp">\n      <img class="video__media" src="https://i.ytimg.com/vi/').concat(t,'/maxresdefault.jpg" alt="poster">\n    </picture>\n  '),d=document.createElement("a");d.classList.add("video__link"),d.setAttribute("href","https://youtu.be/ID".replace("ID",t)),1===a&&n&&UrlExists(n)?d.innerHTML='<img class="video__media" src="'.concat(n,'" alt="poster">'):d.innerHTML=o,e.appendChild(d);const c=document.createElement("button");c.classList.add("video__button"),c.setAttribute("type","button"),c.setAttribute("aria-label","play"),c.innerHTML='\n    <svg class="play" width="100" height="100" viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path class="play__circle" d="M50 100c27.614 0 50-22.386 50-50S77.614 0 50 0 0 22.386 0 50s22.386 50 50 50z" />\n      <path class="play__triangle" d="M69.166 48.463c.255.163.466.39.612.658a1.843 1.843 0 010 1.757 1.802 1.802 0 01-.612.659L40.726 69.72c-1.185.758-2.726-.11-2.726-1.538V31.818c0-1.427 1.54-2.296 2.727-1.537l28.439 18.182z" />\n    </svg>\n  ',e.appendChild(c),e.addEventListener("click",(n=>{if(n.preventDefault(),!e.classList.contains("bonus__video")){const n=createIframe(t);d.remove(),c.remove(),e.appendChild(n)}})),d.removeAttribute("href"),e.classList.add("video--enabled")}function findVideo(){const e=document.querySelectorAll(".video");for(let t=0;t<e.length;t+=1)setupVideo(e[t])}function installmentPlan(){const e="&cred_type=1",t=window.location.pathname.split("/")[1],n=document.querySelector(".installment-plan"),a=e.split("=")[2];if(1!==+e.split("=")[1].split("&")[0])switch(t){case"ru":n.innerHTML="(до <span>".concat(a,"</span> платежей без %)");break;case"he":n.innerHTML="(עד <span>".concat(a,"</span> תשלומים ללא ריבית)");break;case"ar":n.innerHTML="(حتى <span>".concat(a,"</span> أقساط بدون ربا)");break;default:n.innerHTML="(до <span>".concat(a,"</span> платежей без %)")}else n.innerHTML=""}buttonOpenModal.forEach((e=>{e.addEventListener(clickEvent,(t=>{t.preventDefault(),addingContent(e),modal.open()}))})),findVideo(),installmentPlan(),window.addEventListener("load",(()=>{}));
//# sourceMappingURL=main.js.map
